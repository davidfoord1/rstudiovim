<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>rstudiovim • rstudiovim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rstudiovim">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rstudiovim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/rstudiovim.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/davidfoord1/rstudiovim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>rstudiovim</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidfoord1/rstudiovim/blob/main/vignettes/rstudiovim.Rmd" class="external-link"><code>vignettes/rstudiovim.Rmd</code></a></small>
      <div class="d-none name"><code>rstudiovim.Rmd</code></div>
    </div>

    
    
<p>Welcome! This is an intro to usage of the {rstudiovim} package, and
assumes you have general knowledge of Vim motions. We will go over key
binding with Vim ex commands, the main package functionality and
applying it with an Rprofile file.</p>
<div class="section level2">
<h2 id="keybinding-commands">Keybinding commands<a class="anchor" aria-label="anchor" href="#keybinding-commands"></a>
</h2>
<p>RStudio offers a few commands for setting up key bindings:</p>
<ul>
<li>
<code>imap</code> - insert mode.</li>
<li>
<code>nmap</code> - normal mode.</li>
<li>
<code>vmap</code> - visual mode.</li>
<li>
<code>map</code> - for both normal and visual modes.</li>
</ul>
<p>The general structure then goes like this:</p>
<p><code>&lt;map_command&gt; &lt;new_key_sequence&gt; &lt;keys_to_execute&gt;</code></p>
<p>For example to bind home-row keys to exit from insert mode to normal
mode, the command could be:</p>
<p><code>imap jk &lt;Esc&gt;</code></p>
<p>Note the <em>i</em> map, meaning this binding applies when you are
insert mode. So, when you are in insert mode, the key sequence
<code>jk</code> is mapped to the <code>Esc</code> key, which is the
typical way to move from insert mode to normal mode.</p>
<div class="section level3">
<h3 id="executing-commands">Executing commands<a class="anchor" aria-label="anchor" href="#executing-commands"></a>
</h3>
<p>Assuming you already have Vim key bindings active in the RStudio
source editor, you can bring up Vim command mode from normal mode by
pressing <code>:</code>, then type your command and press
<code>Enter</code> to execute it.</p>
<p>So starting in normal mode press the keys, you could apply the
example keybinding with <code>imap jk &lt;Esc&gt;</code>, in full
pressing the keys <code>:</code> <code>i</code> <code>m</code>
<code>a</code> <code>p</code> <code>&lt;Space&gt;</code> <code>j</code>
<code>k</code> <code>&lt;Space&gt;</code> <code>&lt;</code>
<code>E</code> <code>s</code> <code>c</code> <code>&gt;</code>
<code>&lt;Enter&gt;</code>.</p>
</div>
<div class="section level3">
<h3 id="recursive-keybindings">Recursive keybindings<a class="anchor" aria-label="anchor" href="#recursive-keybindings"></a>
</h3>
<p>One thing to watch out for is that the commands listed above are
recursive. If you use command <code>map p p</code>, you won’t be able to
paste anymore because <code>p</code> just refers to itself instead of
the paste command. Pressing <code>p</code> will just do nothing.</p>
<p>At present RStudio does not offer non-recurseive (<code>nore</code>)
versions of the map commands typically among Vim ex commands like
<code>noremap</code>. This means we’re mostly limited to creating
commands for <em>new</em> key chains, like <code>jk</code> above.</p>
</div>
</div>
<div class="section level2">
<h2 id="applying-commands-with-rstudiovim">Applying commands with {rstudiovim}<a class="anchor" aria-label="anchor" href="#applying-commands-with-rstudiovim"></a>
</h2>
<p>If we’re happy with a command and can run it ourselves in RStudio, it
should be relatively straightforward to get that command to run every
session. With {rstudiovim} installed and loaded we can set up a config
file and have it executed every session. If you’ve read the README,
you’ve already seen everything you need.</p>
<p>The typical config file is called <code>.vimrc</code>. You can create
your own version at any location and supply the path, but the simplest
usage will be with the default path provided.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/file.edit.html" class="external-link">file.edit</a></span><span class="op">(</span><span class="fu"><a href="../reference/rsvim_default_path.html">rsvim_default_path</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then add your commands to the file, with each on a separate line. You
can add comment lines by preceding them with double quotes
<code>"</code> like so:</p>
<pre class="vim"><code>" home-row exit from insert mode
imap jk &lt;Esc&gt;
</code></pre>
<p>You must of course save the file! Then we need to point {rstudiovim}
to your file to execute. With the default file path, it’s as simple
as:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rsvim_exec_file.html">rsvim_exec_file</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>There is a prerequisite that you have a file open at the front of
your source editor as though you were going to enter the commands - the
package is just pressing the keys for you. You should see the
command-line dialogue box flash up and might be able to glimpse what’s
being typed. Don’t provide other inputs while this is happening, so as
not to interrupt the process. Once done, it reports</p>
<pre><code><span><span class="co">#&gt; .vimrc executed.</span></span></code></pre>
<p>If you have used a different path, you pass it at the first argument.
It’s read with <code><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines()</a></code>, so can can be a remote location
as well - which can make it easy to share your config between devices.
For example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rsvim_exec_file.html">rsvim_exec_file</a></span><span class="op">(</span><span class="st">"https://raw.github.com/davidfoord1/rstudiovim/main/inst/example.vimrc"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="applying-commands-to-every-session-with-an-rprofile">Applying commands to every session with an Rprofile<a class="anchor" aria-label="anchor" href="#applying-commands-to-every-session-with-an-rprofile"></a>
</h3>
<p>Your <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/Startup" class="external-link"><code>.Rprofile</code></a>
is a file containing R code to be executed at the start of every R
session. Be mindful you can have a .Rprofile at both the user level and
project level - one at project level will be executed instead of user
level one, so make sure the rsvim call is where you need it.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># User level</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/file.edit.html" class="external-link">file.edit</a></span><span class="op">(</span><span class="st">"~/.Rprofile"</span><span class="op">)</span></span>
<span><span class="co"># Project level</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/file.edit.html" class="external-link">file.edit</a></span><span class="op">(</span><span class="st">".Rprofile"</span><span class="op">)</span></span></code></pre></div>
<p>By using the argument <code>rprofile = TRUE</code> the exec file
command will set a hook to execute on the R Studio session start up. It
won’t execute on every <em>R</em> session restart - it won’t need to as
the bindings persist through the <em>R Studio</em> session. To get the
config file to be executed, include the following R code:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="va">interactive</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">rstudiovim</span><span class="fu">::</span><span class="fu"><a href="../reference/rsvim_exec_file.html">rsvim_exec_file</a></span><span class="op">(</span>rprofile <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Alternatively if you think you might want the package attached every
session:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="va">interactive</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/davidfoord1/rstudiovim" class="external-link">rstudiovim</a></span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/rsvim_exec_file.html">rsvim_exec_file</a></span><span class="op">(</span>rprofile <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Again, remember to save your file. Ok, that should be it. Now when
you open a new RStudio session, you should see that {rstudiovim} is
executing the key presses for you.</p>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<ul>
<li><p>First, the Vim implementation is quite limited, so always make
sure the command is one you can execute in RStudio yourself first. If it
doesn’t, there’s not much {rstudiovim} can do about it.</p></li>
<li><p>If something doesn’t work that usually does, try restarting the R
session and executing an <code><a href="../reference/rsvim_exec_file.html">rsvim_exec_file()</a></code> call again.
Sometimes the execution gets interrupted by other processes.</p></li>
<li><p>If a command works for you when you type it yourself, but doesn’t
seem to work with {rstudiovim}, then there may be an issue in the
parsing of your commands and translation to key presses. There is an
argument <code>wait</code> with which you can specify seconds to wait
between your commands being typed and then executed. In this way you can
review what is actually being typed. If you find a disparity between
what is being typed and what’s in your .virmc, please raise (or add to a
related) <a href="https://github.com/davidfoord1/rstudiovim/issues" class="external-link">GitHub
issue</a>. You can use <code><a href="../reference/rsvim_exec.html">rsvim_exec()</a></code> for a single command if
that helps you narrow the behaviour down.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Foord.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
